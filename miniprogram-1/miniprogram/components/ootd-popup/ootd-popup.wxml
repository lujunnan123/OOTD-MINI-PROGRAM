<!-- ootd-popup.wxml -->
<view class="popup-mask {{show ? 'show' : ''}}" bindtap="onMaskTap" catchmove="preventTouchMove">
  <view class="popup {{show ? 'show' : ''}}" catchtap="stopPropagation">
    <!-- å¤´éƒ¨ -->
    <view class="popup-header">
      <view class="drag-indicator"></view>
      <view class="popup-title">ä»Šæ—¥OOTDæ¨è</view>
      <view class="popup-subtitle">æ ¹æ®ä»Šæ—¥{{weatherDesc}} ({{temp}}Â°C) å’Œä½ çš„{{styleType}}åå¥½</view>
    </view>
    
    <!-- è½®æ’­å›¾åŒºåŸŸ -->
    <view class="popup-content">
      <view class="carousel">
        <swiper class="carousel-swiper" bindchange="onSwiperChange" current="{{currentSlide}}">
          <swiper-item wx:for="{{ootdImages}}" wx:key="index">
            <view class="outfit-container">
              <!-- ä½¿ç”¨å›ºå®šçš„æ¨¡æ‹Ÿç©¿æ­å›¾ -->
              <text class="outfit-placeholder">{{styleType}}ç©¿æ­ç¤ºä¾‹ #{{index+1}}</text>
              <view class="outfit-details">
                <text>{{weatherDesc}} â€¢ {{temp}}Â°C</text>
              </view>
            </view>
          </swiper-item>
        </swiper>
        
        <!-- è½®æ’­æŒ‡ç¤ºç‚¹ -->
        <view class="carousel-dots">
          <view wx:for="{{ootdImages}}" wx:key="index" 
                class="carousel-dot {{currentSlide === index ? 'active' : ''}}"></view>
        </view>
        
        <!-- å·¦å³ç®­å¤´ -->
        <view class="carousel-nav carousel-prev" catchtap="prevSlide">
          <text class="nav-icon">ã€ˆ</text>
        </view>
        <view class="carousel-nav carousel-next" catchtap="nextSlide">
          <text class="nav-icon">ã€‰</text>
        </view>
        
        <!-- å…³é—­æŒ‰é’® -->
        <view class="close-button" catchtap="onClosePopup">
          <text class="close-icon">Ã—</text>
        </view>
      </view>
      
      <!-- ç©¿æ­å»ºè®® -->
      <view class="advice-section">
        <view class="advice-title">AIç©¿æ­å¸ˆçš„å»ºè®®</view>
        <view class="advice-content">
          {{ootdAdvice.paragraph1}}
        </view>
        <view class="advice-content">
          {{ootdAdvice.paragraph2}}
        </view>
        <view class="advice-tags">
          <text wx:for="{{ootdAdvice.tags}}" wx:key="index" class="advice-tag">{{item}}</text>
        </view>
        
        <button class="save-button" bindtap="saveOOTD">
          <text class="save-icon">ğŸ’¾</text> ä¿å­˜ä»Šæ—¥ç©¿æ­
        </button>
      </view>
    </view>
  </view>
</view> 