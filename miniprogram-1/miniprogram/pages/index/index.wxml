<!--index.wxml-->
<view class="container">
  <!-- çŠ¶æ€æ æ ·å¼ä¼šç”±å°ç¨‹åºè‡ªåŠ¨æä¾› -->
  
  <!-- ä¸»å†…å®¹ -->
  <view class="content-container">
    <view class="page-title">ä»Šæ—¥å¤©æ°”ä¸ç©¿æ­</view>
    
    <!-- ä»Šæ—¥å¤©æ°”å¡ç‰‡ -->
    <weather-skeleton type="today" loading="{{loadingToday}}">
      <view class="card">
        <view class="weather-today">
          <view class="weather-info">
            <view class="location-text">{{city}} Â· ä»Šå¤©</view>
            <view class="temp-large">{{todayWeather.temp}}Â°C</view>
            <view class="feel-temp">ä½“æ„Ÿæ¸©åº¦ {{todayWeather.feelTemp}}Â°C</view>
            <view class="weather-tags">
              <text class="weather-tag">ğŸŒ¬ï¸ {{todayWeather.windLevel}}çº§</text>
              <text class="weather-tag">ğŸ’§ {{todayWeather.humidity}}%</text>
            </view>
          </view>
          <view class="weather-icon-container">
            <view class="weather-icon">{{todayWeather.icon}}</view>
            <view>{{todayWeather.desc}}</view>
          </view>
        </view>
      </view>
    </weather-skeleton>
    
    <!-- è¿‘7æ—¥å¤©æ°”å¡ç‰‡ -->
    <weather-skeleton type="forecast" loading="{{loadingForecast}}">
      <view class="card">
        <view class="section-title">æœªæ¥7å¤©å¤©æ°”</view>
        <view class="forecast-list">
          <!-- æ¯æ—¥å¤©æ°”é¢„æŠ¥ -->
          <view wx:for="{{weekWeather}}" wx:key="day" class="forecast-item">
            <view class="day-name">{{item.day}}</view>
            <view class="day-icon">{{item.icon}}</view>
            <view class="day-temp">
              <text class="max-temp">{{item.maxTemp}}Â°</text>
              <text class="min-temp">{{item.minTemp}}Â°</text>
            </view>
          </view>
        </view>
      </view>
    </weather-skeleton>
    
    <!-- ä»Šæ—¥ç©¿æ­é£æ ¼å¡ç‰‡ -->
    <view class="card">
      <view class="section-title">ä»Šæ—¥ç©¿æ­é£æ ¼</view>
      <view class="style-desc">é€‰æ‹©ä½ ä»Šå¤©æƒ³è¦çš„ç©¿æ­é£æ ¼ï¼š</view>
      
      <view class="style-chips">
        <view wx:for="{{styleOptions}}" wx:key="name" 
              class="style-chip {{selectedStyle === item.name ? 'selected' : ''}}"
              data-style="{{item.name}}"
              bindtap="selectStyle">
          {{item.name}}
        </view>
      </view>
      
      <button class="generate-btn" bindtap="generateOOTD">
        ğŸ‘• ç”Ÿæˆä»Šæ—¥OOTD
      </button>
    </view>
  </view>
</view>

<!-- OOTDå¼¹å‡ºç»„ä»¶ -->
<ootd-popup 
  show="{{showOOTDPopup}}" 
  weather="{{todayWeather.desc}}" 
  temperature="{{todayWeather.temp}}" 
  style="{{selectedStyle}}"
  outfits="{{generatedOutfits}}"
  advice="{{stylistAdvice}}"
  tags="{{adviceTags}}"
  bind:close="closeOOTDPopup"
  bind:save="saveOutfit">
</ootd-popup>
